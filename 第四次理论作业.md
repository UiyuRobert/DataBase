# 第四次理论作业

### 第二题

#### 关系模式

- 学生（学号，姓名，生日，系名，班号，宿舍区） `S(SNO,SN,SB,DN,CNO,SA)`，
- 班级（班号，专业名，系名，人数，入校年份） `C(CNO,CS,DN,CNUM,CDATE)`
- 系（系名，系号，系办公室地点，人数） `D(DN,DNO,DA,DNUM)`
- 学会 （学会名，成立年份，地点，人数）`P(PN,PDATE,PA,PNUM)`
- 学生-学会（学号，学会名，加入时间） `SP(SNO,PN,SPDATE)`

#### 极小函数依赖集

- `S: SNO->SN,SNO->SB,SNO->CNO(学生与班级是多对一关系),CNO->DN(班号与 专业+年份 是一对一关系，专业与系名是多对一关系)，DN->SA(系号与宿舍区是多对一关系)`
  - 有传递函数依赖
    - `SNO->CNO + CNO->DN + CNO-\>SNo => SNO->DN`
    - `CNO->DN + DN->SA + DN-\>CNO => CNO->SA`
    - `SNO->DN + DN->SA + DN-\>SNO => SNO->SA`
  - 候选码为 `SNO`，外部码为 `CNO,DN`
- `C: CNO->CS,CS->DN,CNO->CNUM,CNO->CDATE,(CS,CDATE)->CNO`
  - 有传递函数依赖
    - `CNO->CS + CS->DN + CS-\>CNO => CNO->DN`
  - 候选码为 `CNO, (CS,CDATE)`，外部码是 `DN`，`(CS,CDATE)` 是完全函数依赖
- `D: DN->DNO,DN->DA,DN->DNUM,DNO->DN(系名系号一一对应)`
  - 不存在传递函数依赖
  - 候选码为 `DN，DNO`，无外部码
- `P: PN->PDATE,PN->PA,PN->PNUM`
  - 不存在传递函数依赖
  - 候选码为 `PN`，无外部码
- `SP: (SNO,PN)->SPDATE`
  - 不存在传递函数依赖
  - 候选码为 `(SNO,PN)`，外部码为 `SNO,PN`，`(SNO,PN)` 是完全函数依赖

### 第六题

1. 属性 `BC` 必须含有码
2. 码：`ACE,BCE,DCE`
3. 是 `3NF`。因为 `ABCDE` 都是主属性，是 `3NF`；同时函数依赖的左部不包含码，所以不是 `BCNF`

### 第七题

1. 任何一个二目关系都是属于 `3NF` 的 （正确）
2. 任何一个二目关系都是属于 `BCNF` 的 （正确）
3. 任何一个二目关系都是属于 `4NF` 的 （正确）
4. 错误，正确的是 当且仅当多值依赖 `A->->B` 在 `R` 上成立，关系 `R(A,B,C)` 等于其投影 `R1(A,b)`与 `R2(A,C)` 的连接
5. 正确
6. 正确
7. 正确
8. 错误，比如 （姓名 + 课程）可以决定成绩，但是姓名和课程无法单独决定成绩

### 补充第一题

$$
(AE)_F^{+} =\{ A,E,D,C,I \}
$$

### 补充第二题

$$
F_m = \{ S\#\to SD,SD\to MN,(S\#,CN)\to G \}
$$

### 补充第三题

1. 候选码：`BD`
2. 是 `1NF`，因为存在非主属性对码的部分函数依赖
3. - `R1({A,B},{B->A})`
   - `R2({C,D},{D->C})`
   - `R3({A,C},{A->C,C->A})`
   - `R4({B,D},{})`
